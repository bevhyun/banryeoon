<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitstudy.app.mapper.AnimalMapper">

<!--  종이랑 이미지코드만 불러오는 코드  -->
    <select id="selectAnimalList" parameterType="int" resultType="com.bitstudy.app.dto.AnimalDto">
            SELECT aniBreed, aniImg1 FROM banryeoon_db.animal WHERE aniTypeCd = #{aniTypeCd};
        </select>


    <!-- animal 정보 다 불러오는 코드 -->
    <select id="selectAllAnimal" parameterType="string" resultType="com.bitstudy.app.dto.AnimalDto">
        SELECT * FROM animal;
    </select>


<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->


<!--aniBreed에서 검색하는 코드-->
    <select id="searchByBreed" parameterType="string" resultType="com.bitstudy.app.dto.AnimalDto">
        SELECT * FROM animal WHERE aniBreed LIKE CONCAT('%', #{aniBreed}, '%')
    </select>


<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->


<!--  디테일페이지에 필요한 코드를 불러오는 매퍼  -->
    <select id="selectAnimalBySeqno" parameterType="int" resultType="com.bitstudy.app.dto.AnimalDto">
        SELECT aniSeqno, aniBreed, aniGender, aniAge, aniImg1, aniImg2, aniHappenDt, aniSpecialMark FROM animal WHERE aniSeqno = #{aniSeqno}
    </select>


<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->


    <!-- 총 건수 조회 -->
    <select id="countByType" parameterType="int" resultType="int">
        SELECT COUNT(*)
        FROM animal
        WHERE aniTypeCd = #{aniTypeCd}
    </select>

    <!-- 페이징 리스트 조회 -->
    <select id="selectList" resultType="com.bitstudy.app.dto.AnimalDto">
        SELECT *
        FROM animal
        WHERE aniTypeCd = #{aniTypeCd}
        ORDER BY aniSeqno
            LIMIT #{limit} OFFSET #{offset}
    </select>

</mapper>

<!--

1) DTO 먼저 만들어
2) mapper 만들어
3) DAO 만들어
4) 그걸로 DAOImpl 만들어
5) TDD 만들어
6) 서비스 만들어
7) 컨트롤러만들어

-->